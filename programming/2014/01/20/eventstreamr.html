<!DOCTYPE html>
<!--
    Based upon Striped 2.5 by HTML5 Up!
    html5up.net | @n33co
    Updated for Jekyll by Paul Fenwick | @pjf
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="en">
    <head prefix="og: http://ogp.me/ns#">
        <title>Automating AV&#58; EventStreamr</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />

        


    <meta property="og:image" content="http://www.techman83.me/images/leon_tiger.jpg"  />
    <link rel="image_src"        href="http://www.techman83.me/images/leon_tiger.jpg"  />


<meta property="og:title" content="Automating AV&amp;#58; EventStreamr"  />
<meta property="og:url"   content="http://www.techman83.me/programming/2014/01/20/eventstreamr.html" />

<!-- This should be expanded to allow for 'article' types -->
<meta property="og:type"  content="website" />




    <meta name="keywords" content="programming, perl, lca2014" />



        <link rel="icon" type="image/png" href="/images/favicon.png" />
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml"/>

        
            <link rel="alternate" type="application/rss+xml" title="All Comments" href="http://techman83.disqus.com/latest.rss"/>
        

        <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400italic,700|Open+Sans+Condensed:300,700" rel="stylesheet" />
        <script src="/js/jquery.min.js"></script>
        <script src="/js/skel.min.js"></script>
        <script src="/js/skel-panels.min.js"></script>
        <script src="/js/init.js"></script>
        <noscript>
            <link rel="stylesheet" href="/css/skel-noscript.css" />
            <link rel="stylesheet" href="/css/style.css" />
            <link rel="stylesheet" href="/css/style-desktop.css" />
            <link rel="stylesheet" href="/css/style-wide.css" />
        </noscript>
        <!--[if lte IE 9]><link rel="stylesheet" href="css/ie9.css" /><![endif]-->
        <!--[if lte IE 8]><script src="js/html5shiv.js"></script><link rel="stylesheet" href="css/ie8.css" /><![endif]-->
        <!--[if lte IE 7]><link rel="stylesheet" href="css/ie7.css" /><![endif]-->

        <!-- TODO: Only load on fancybox pages -->
<link rel="stylesheet" href="/fancybox/source/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
<script>
  $(window).load(function() {
    $(".fancybox_gallery").fancybox();
  });
</script>


        <link rel="stylesheet" href="/css/pygments.css" />
        <link rel="stylesheet" href="/css/pjf.css" />

        
            <link rel="stylesheet" href="/css/custom.css" />
        

    </head>
    <!--
        Note: Set the body element's class to "left-sidebar" to position the sidebar on the left.
        Set it to "right-sidebar" to, you guessed it, position it on the right.
    -->
    <body class="left-sidebar">
    
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-39211824-2']);
  _gaq.push(['_gat._anonymizeIp']); // Better user privacy
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


        <div id="wrapper">
            <div id="content">
                <div id="content-inner">
                    
    


<article class="is-post">
    <header>
    

    <h2>Automating AV&#58; EventStreamr</h2>
    
    <p class="edit-post">
(You can <a href="https://github.com/techman83/techman83.github.io/edit/build/programming/_posts/2014-01-20-eventstreamr.md">suggest changes</a>
to this post.)
</p>


</header>

    <div class="info">
    
    <span class="date"> <span class="month">Jan</span>
        <span class="day">20</span> <span
            class="year"><span>,</span> 2014</span>
    </span>


    <!-- Note: You can change the number of list items in "stats" to whatever you want. -->

    <!--
        <ul class="stats">
            <li><a href="#" class="fa fa-comment">16</a></li>
            <li><a href="#" class="fa fa-heart">32</a></li>
            <li><a href="#" class="fa fa-twitter">64</a></li>
            <li><a href="#" class="fa fa-facebook">128</a></li>
        </ul>
    -->
</div>


    

    <p><a href="https://github.com/lukejohnosmahi/eventstreamr/">EventStreamR</a> come to inception from a collection of experiences amongst our local LUG the <a href="https://www.plug.org.au">Perth Linux User Group</a>. Although we call ourselves PLUG, we have members from all over the state. Western Australia being quite large, 2,529,875 square km or over 10 times bigger than Victoria; so some of our members find it quite difficult to attend. A few years ago an initiave started by <a href="http://blog.james.rcpt.to/">James Bromberger</a> was to film and live stream all PLUG talks so that every member had an oppurtunity to attend our meetings, even if they couldn’t necessarily make it in person.
<!--more--></p>

<p>Between our experience streaming and attending LCA2013 to get a feel for how the conference ran, we had come to the conclusion that the Open Source Video mixing stack we use (DVswitch), whilst being easy to use and quite fit for purpose; it can be a little unreliable. Along with that DV aka Digital Video as a dying standard. To my knowledge there isn’t a lot of work being put into the project as the world is moving on from DV. In light of all that we had come up with a list of requirements to bring reliability to the table.</p>

<ul>
  <li>Open Source</li>
  <li>Be able to scale up and down</li>
  <li>Easy to setup and use</li>
  <li>Work on any hardware</li>
  <li>Central Configuration Management + Control</li>
  <li>Able to operate independently (Locations with no network or failure of networking)</li>
</ul>

<p>Ability to scale down was particularly important to us, as we want to be able to use this solution at our local LUG and also encourage other LUGs to generate content. Which was something that I felt was lacking in some of the established solutions (eg. Matterhorn, though I’m happy to be shown otherwise). So after gathering our requirements, there was also figuring out what problems we needed to solve.</p>

<ul>
  <li>DVswitch - It sometimes goes bang</li>
  <li>DVgrab - does not fail gracefully</li>
  <li>Setup for multiple stations and rooms is time consuming</li>
</ul>

<p>There are 2 major components to EventStreamR, I’ll cover the engine that sits in the background doing all the hardwork. I had pondered for some time about how I was going to solve the above problems and also meet our requirements. I felt Perl would be up to the challenge (and also happens to be the language I have the most exeprience in). It’s a language I frequently use to glue things together in my day job and there are many libraries availble, which means less time re-inventing the wheel.</p>

<p>With <a href="https://github.com/lukejohnosmahi">Luke</a> writing the framework for the frontend, it left me focus on the backend. Which at it’s core is a <a href="https://github.com/lukejohnosmahi/eventstreamr/blob/master/station/bin/station-mgr.pl">single daemon</a> and essentially is a RESTful api enabled glorified process manager. I learnt a number of things whilst developing this with <a href="https://github.com/nimm">Jason</a>.</p>

<ul>
  <li>The current firewire stack is extremely reliable, the hardware I chose to develop the solution with initially was not. (2 days yak shaving due to a faulty camera and faulty firewire leads).</li>
  <li>IPC::Shareable - I love what it can do, however you really need to devote time to managing your shared memory. We had modest needs, so Signals + HTTP calls were more than enough.</li>
  <li>There are either restrictions to what key names when utilising JSON for serialised data or the JSON library does not escape them correctly. <a href="https://github.com/lukejohnosmahi/eventstreamr/issues/53">I need to fix this properly</a></li>
  <li>The default dancer HTTP engine (HTTP::Server::Simple::CGI) does not support all HTTP methods. Causing much hair pulling when attempting to address CORS issues.</li>
  <li>When you think you’ve squashed all the bugs, there will be more</li>
  <li>You won’t have quality time to write code at a conference</li>
  <li>You will have to write code at the conference and it will inolve hours of yak shaving</li>
  <li>If you’re making a lot of mistakes, have a nap or if it’s late go to bed!</li>
</ul>

<p>Overall LCA2014 was a success and I’m happy to report that the solution was extremely reliable, we had some hardware failure and issues with capture devices; scenarios we were quite preparred for. I’m sure there is more I could write or more lessons I could share, but I will leave you with the following statement and youtube video.</p>

<p>Amazing things can happen when your volunteers are not afraid to experiemnt.</p>

<div class="video-container"><iframe width="560" height="420" src="http://www.youtube.com/embed/vbt_0q4qWUo?html5=1"> </iframe></div>
<p><a href="http://www.youtube.com/watch?v=vbt_0q4qWUo">Watch on YouTube</a></p>
<p>(We caught this on the video wall in the TAVNOC and crowded around the nearest computer with external speakers. It was amazing!)</p>



    

<div class="addthis_container">
    <p>Share this:</p>
    <div class="addthis addthis_toolbox addthis_default_style addthis_32x32_style">
        <a class="addthis_button_preferred_1"></a>
        <a class="addthis_button_preferred_2"></a>
        <a class="addthis_button_preferred_3"></a>
        <a class="addthis_button_preferred_4"></a>
        <a class="addthis_button_compact"></a>
        <a class="addthis_counter addthis_bubble_style"></a>
    </div>
</div>

<script>
var addthis_config = {
    /* services_compact: 'facebook, twitter, reddit', */
    services_exclude: 'print, email' 
} 
</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-52df33e30fca36e7"></script>




    

    
<div class="tip-box">
    <p>
        <a href="https://www.gittip.com/techman83/"><i class="fa fa-gittip fa-3x pull-left"></i></a>
        This content is available for you to use for free,
        even commercially, under a <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 license</a>.
    </p><p>
        If you wish to support my work,
        please <a href="https://www.gittip.com/techman83/">tip me on gittip</a>.
    </p>
</div>



    

<div id="disqus_thread"></div>
<script type="text/javascript">

    var disqus_shortname  = "techman83"; 
    var disqus_identifier = "/programming/2014/01/20/eventstreamr.html";
    var disqus_title      = "Automating AV&amp;#58; EventStreamr";
    var disqus_url        = "http://www.techman83.me/programming/2014/01/20/eventstreamr.html";

    /* Make sure that once disqus renders, we trigger any events that
     * need to happen on page resize. Otherwise our left-bar looks funny. */

    function disqus_config() {
        this.callbacks.onReady.push(function() {
            var $sc = $('#sidebar, #content');

if (skel.isActive('mobile') || skel.isActive('narrower'))
    $sc.css('min-height', '0').css('height', 'auto');
else
    $sc.css('min-height', $(window).height()).css('height', $(document).height());


        });

        this.callbacks.onNewComment.push(function() {
            var $sc = $('#sidebar, #content');

if (skel.isActive('mobile') || skel.isActive('narrower'))
    $sc.css('min-height', '0').css('height', 'auto');
else
    $sc.css('min-height', $(window).height()).css('height', $(document).height());


        });
    }

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>




</article>


                    


                </div>
            </div>

            <!-- Sidebar -->
<div id="sidebar">
    <!-- Logo -->
    <div id="logo"><h1><a href="/">techman83</a></h1></div>

    <section class="find_me">
    
        <a href="http://twitter.com/Techman_83" rel="me"><i class="fa fa-twitter-square  fa-3x"  ></i></a>
    
    
    
        <a href="https://github.com/techman83" rel="me"><i class="fa fa-github-square   fa-3x"  ></i></a>
    
    
    
        <a href="https://plus.google.com/+LeonWright" rel="me"><i class="fa fa-google-plus-square fa-3x"  ></i></a>
    
    <a href="/feed.xml"><i class="fa fa-rss-square fa-3x"></i></a>
    </section>

    <!-- Nav -->
    <nav id="nav">
        <ul>
            <!-- <li class="current_page_item"><a href="/"></a></li> -->
            <li><a href="/">Latest Posts</a></li>
        
            <li><a href="/personal">Personal</a></li>
        
            <li><a href="/programming">Programming</a></li>
        
            <li><a href="/plug">PLUG</a></li>
        
        </ul>
    </nav>

    
        <section class="is-search">
            <form id="cse-search-box" action="http://google.com/cse">
            <input type="hidden" name="cx" value="013407213838922707467:62s2x7krfn8" />
            <input type="hidden" name="ie" value="UTF-8" />
            <input class="text" type="text" name="q" placeholder="Search" />
        </form>
        Search powered by Google.
        </section>
    

    <!-- Text -->
    <section class="is-text-style1">
        <div class="inner">
            <p>
            
                <a href="https://www.gittip.com/techman83/">
                    <i class="fa fa-gittip fa-3x pull-left"></i>
                </a>
            
                Everything on this site is free for you to use
                under the <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0</a> license.
            </p>
        </div>
    </section>

    <!-- Recent Posts -->
    <section class="is-recent-posts">
        <header>
            <h2>Recent Posts</h2>
        </header>

        <ul>
        
            <li><a href="/programming/2015/04/16/EventStreamr.html">EventStreamr Talk at PLUG</a>
        
            <li><a href="/programming/2014/08/26/webservice_strava.html">WebService::Strava - A Strava API Perl Client</a>
        
            <li><a href="/programming/2014/08/04/jira_automation.html">Jira Automation + Copying Fields</a>
        
            <li><a href="/personal/2014/07/29/xperiaz_warranty.html">My Xperia Z broke itself!</a>
        
            <li><a href="/personal/2014/03/23/repair_freehub.html">Freehub Repair/Replace Clutch Master Cylinder</a>
        
            <li><a href="/programming/2014/02/20/dancing_with_websockets.html">Dancing with WebSockets</a>
        
            <li><a href="/personal/2014/02/12/refit_bb.html">Bottom Bracket Refit + Dropout repair</a>
        
            <li><a href="/programming/2014/02/11/bah_wrong_branch.html">Git&#58; Bah, wrong branch!</a>
        
            <li><a href="/personal/2014/02/06/repair_bb.html">Bottom Bracket Removal</a>
        
            <li><a href="/programming/2014/01/20/eventstreamr.html">Automating AV&#58; EventStreamr</a>
        
        </ul>
    </section>

    <!-- Recent Comments -->
    <!-- <section class="is-recent-comments">
        <header>
            <h2>Recent Comments</h2>
        </header>
        <ul>
            <li>case on <a href="#">Now Full Cyborg</a></li>
            <li>molly on <a href="#">Untitled Post</a></li>
            <li>case on <a href="#">Temporal Flux</a></li>
        </ul>
    </section> -->

    <!-- Calendar -->

    <!-- <section class="is-calendar">
        <div class="inner">
            <table>
                <caption>February 2013</caption>
                <thead>
                    <tr>
                        <th scope="col" title="Monday">M</th>
                        <th scope="col" title="Tuesday">T</th>
                        <th scope="col" title="Wednesday">W</th>
                        <th scope="col" title="Thursday">T</th>
                        <th scope="col" title="Friday">F</th>
                        <th scope="col" title="Saturday">S</th>
                        <th scope="col" title="Sunday">S</th>
                    </tr>
            </thead>
            <tbody>
                    <tr>
                        <td colspan="4" class="pad"><span>&nbsp;</span></td>
                        <td><span>1</span></td>
                        <td><span>2</span></td>
                        <td><span>3</span></td>
                    </tr>
                    <tr>
                        <td><span>4</span></td>
                        <td><span>5</span></td>
                        <td><a href="#">6</a></td>
                        <td><span>7</span></td>
                        <td><span>8</span></td>
                        <td><span>9</span></td>
                        <td><a href="#">10</a></td>
                    </tr>
                    <tr>
                        <td><span>11</span></td>
                        <td><span>12</span></td>
                        <td><span>13</span></td>
                        <td class="today"><a href="#">14</a></td>
                        <td><span>15</span></td>
                        <td><span>16</span></td>
                        <td><span>17</span></td>
                    </tr>
                    <tr>
                        <td><span>18</span></td>
                        <td><span>19</span></td>
                        <td><span>20</span></td>
                        <td><span>21</span></td>
                        <td><span>22</span></td>
                        <td><a href="#">23</a></td>
                        <td><span>24</span></td>
                    </tr>
                    <tr>
                        <td><a href="#">25</a></td>
                        <td><span>26</span></td>
                        <td><span>27</span></td>
                        <td><span>28</span></td>
                        <td class="pad" colspan="3"><span>&nbsp;</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section> -->

    <!-- Copyright -->
    <div id="copyright">
        <p>
            &copy; 2014 Leon Wright<br />
            Design: <a href="http://html5up.net/">HTML5 UP</a><br />
            Site Based On: <a href="https://github.com/pjf/pjf.github.io">pjf.github.io</a>
        </p>
    </div>
</div>

            
        </div>
    <!-- TODO: Only load on fancybox pages -->
<script type="text/javascript">
    $(document).ready(function() {
        $(".fancybox").fancybox({
            closeClick: true,
            closeBtn: false,
            arrows: false,
            mouseWheel: false,
        });
    });
</script>


<!--[if !(lte IE 8)]><!--> 
<script type="text/javascript"> 

    

    (function(){var e=document.createElement("script");e.type="text/javascript";e.async=true;e.src=document.location.protocol+"//d1agz031tafz8n.cloudfront.net/thedaywefightback.js/widget.min.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})()
</script>
<!--<![endif]-->



    </body>
</html>

